<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">


	<h:panelGrid columns="3" >
		<h:panelGroup>
			<p:outputLabel value="#{msg.agData}"/><br />
			<p:calendar locale="pt_BR" pattern="dd/MM/yyyy" value ="#{agendaMB.dataSelecionada}" id="dtAgenda" />
		</h:panelGroup>
		
		<p:commandButton value="#{msg.btnConsulta}" action="#{agendaMB.consultaAgenda}" update=":frm" />
		<p:commandButton value="#{msg.cdRapidoCliente}" onsuccess="modCadNovoCliente.show()" update=":frm" />
	</h:panelGrid>
	
	<p:separator />
	
	<table cellpadding="0" ><tr>
		<td >
			<p:dataTable id="dataHr" paginatorPosition="bottom" var="hr" value="#{agendaMB.listaHorarios}" 
			             rendered="#{agendaMB.listaHorarios.size() > 0}" >
			     
		        <p:column headerText="#{msg.colHora}" footerText="" >  
		            <h:outputText value="#{hr.hora}" />  
		        </p:column> 
		        
			</p:dataTable>
		</td>
	
		<ui:repeat var="fun" value="#{agendaMB.listaAgendaFuncionario}"  >
			
			<td>
				<div id="frm:dataHr" class="ui-datatable ui-widget">
				<div class="ui-datatable-tablewrapper">
				<table role="grid">
					
					<thead id="frm:dataHr_head">
						<tr role="row">
							<th class="ui-state-default" role="columnheader">
								<span>#{fun.nome}</span>
							</th>
						</tr>
					</thead>
					
					<tfoot>
						<tr>
							<td class="ui-state-default"></td>
						</tr>
					</tfoot>
					
					<tbody class="ui-datatable-data ui-widget-content">
						<ui:repeat var="ag" value="#{fun.listaAgenda}"  >
							<tr class="ui-widget-content ui-datatable-even" role="row" ><td role="gridcell">
							
								 <p:commandLink action="#{agendaMB.abreAgendamento}" value="#{ag.nomeCliente}" oncomplete="agendamentoPoup.show()" rendered="#{ag.codigoAtendimento == 0}"  update=":frm"  >
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigoFuncionario}" value="#{fun.codigo}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.nomeFuncionario}" value="#{fun.nome}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.porcentagem}" value="#{fun.porcentagem}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigo}" value="#{ag.codigo}"/>
			            			<f:setPropertyActionListener target="#{agendaMB.agenda.hora}" value="#{ag.hora}"/>
					            </p:commandLink>  
					            
					            <p:commandLink action="#{agendaMB.abreAgendamento}" oncomplete="agendamentoPoup.show()" rendered="#{ag.codigoAtendimento == 1}" style="background-color:#FFFF00;" update=":frm">
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigoFuncionario}" value="#{fun.codigo}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.nomeFuncionario}" value="#{fun.nome}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.porcentagem}" value="#{fun.porcentagem}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigo}" value="#{ag.codigo}"/>
			            			<f:setPropertyActionListener target="#{agendaMB.agenda.hora}" value="#{ag.hora}"/>
					            	<h:outputText value="#{ag.nomeCliente}" />
					            </p:commandLink>  
					            
					            <p:commandLink action="#{agendaMB.abreAgendamento}" oncomplete="agendamentoPoup.show()"  rendered="#{ag.codigoAtendimento == 2}" style="background-color:#8B8B7A;" update=":frm">
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigoFuncionario}" value="#{fun.codigo}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.nomeFuncionario}" value="#{fun.nome}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.porcentagem}" value="#{fun.porcentagem}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigo}" value="#{ag.codigo}"/>
			            			<f:setPropertyActionListener target="#{agendaMB.agenda.hora}" value="#{ag.hora}"/>
					            	<h:outputText value="#{ag.nomeCliente}" />
					            </p:commandLink>  
					            
					            <p:commandLink action="#{agendaMB.abreAgendamento}" oncomplete="agendamentoPoup.show()" rendered="#{ag.codigoAtendimento == 3}" style="background-color:#00FF7F;" update=":frm">
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigoFuncionario}" value="#{fun.codigo}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.nomeFuncionario}" value="#{fun.nome}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.porcentagem}" value="#{fun.porcentagem}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigo}" value="#{ag.codigo}"/>
			            			<f:setPropertyActionListener target="#{agendaMB.agenda.hora}" value="#{ag.hora}"/>
					            	<h:outputText value="#{ag.nomeCliente}" />
					            </p:commandLink> 
					            
					            <p:commandLink action="#{agendaMB.abreAgendamento}" oncomplete="agendamentoPoup.show()" rendered="#{ag.codigoAtendimento == 4}" style="background-color:#FF1493;" update=":frm">
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigoFuncionario}" value="#{fun.codigo}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.nomeFuncionario}" value="#{fun.nome}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.porcentagem}" value="#{fun.porcentagem}"/>
					            	<f:setPropertyActionListener target="#{agendaMB.agenda.codigo}" value="#{ag.codigo}"/>
			            			<f:setPropertyActionListener target="#{agendaMB.agenda.hora}" value="#{ag.hora}"/>
					            	<h:outputText value="#{ag.nomeCliente}" />
					            </p:commandLink> 
				            
							</td></tr>
						</ui:repeat>
					</tbody>
				</table>
				</div>
				</div>
				
			
			</td>
		
		</ui:repeat>
		

		
	</tr></table>
					

</html>
